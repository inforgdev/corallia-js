"use strict";function e(e,n){!function e(t,a){for(var r in t){var _=t[r];const l=null==a?r:a+"-"+r;_ instanceof Object?e(_,l):n({name:l,value:_})}}(e)}function n(e){const n=e;return Object.keys(e).forEach((t=>{let a=e[t];a.startsWith("$")&&(a=e[a.replaceAll("$","")],n[t]=a)})),n}function t(e){return{type:"arg",expression:e}}function a(e,n){return{type:"param",name:e,default:n}}Object.defineProperty(exports,"__esModule",{value:!0});var r=Object.freeze({__proto__:null,_call:function(e,n){return{type:"call",name:e,args:n}},_arg:t,_dec:function(e,n){return{type:"dec",prop:e,value:n}},_var:function(e,n){return{type:"v",name:e,expression:n}},_val:function(e){return{type:"val",expression:e}},_ref:function(e){return{type:"ref",name:e}},_mixin:function(e,n,t){return{type:"mixin",name:e,params:n,body:t}},_param:a,_args:function(...e){let n=[];for(let a in e){let r=e[a];n.push(t(r))}return n},_params:function(...e){let n=[];for(let t in e){let r=e[t],_=r[0],l=r[1];n.push(a(_,l))}return n}});function _(e,n=data){return"ref"!==e.type?unexpected(e):n.ref.replaceAll("_NAME_",e.name)}function l(e,n=data){return"val"!==e.type?unexpected(e):n.val.replaceAll("_NAME_",e.expression)}function p(e,n=data){if(void 0===e)return unexpected(e);switch(e.type){case"ref":return _(e,n);case"val":return l(e,n);default:return unexpected(e)}}function c(e,n=data){if("v"!==e.type)return unexpected(e);let t=p(e.expression,n);return n.var.replaceAll("_NAME_",e.name).replaceAll("_EXPRESSION_",t)}function i(e,n=data){if("dec"!==e.type)return unexpected(e);let t=p(e.value,n);return n.dec.replaceAll("_PROP_",e.prop).replaceAll("_VALUE_",t)}function s(e,n=data){return"param"!==e.type?unexpected(e):e.default?n.paramDefault.replaceAll("_NAME_",e.name).replaceAll("_DEFAULT_",e.default):n.param.replaceAll("_NAME_",e.name)}function u(e,n=data){let t=[];if(Array.isArray(e))for(let a in e)t.push(s(e[a],n));else t.push(s(e,n));return t.join(n.paramSep)}function d(e,n=data){return"arg"!==e.type?unexpected(e):p(e.expression,n)}function o(e,n=data){let t=[];if(Array.isArray(e))for(let a in e)t.push(d(e[a],n));else t.push(d(e,n));return t.join(n.argSep)}function A(e,n=data){return"call"!==e.type?unexpected(e):n.call.replace("_NAME_",e.name).replaceAll("_ARGS_",o(e.args,n))}function E(e,n=data){if("mixin"!==e.type)return unexpected(e);let t=n.mixin.replaceAll("_NAME_",e.name).replaceAll("_PARAMS_",u(e.params,n)).replaceAll("_BODY_",f(e.body,n));return n.needBrln&&(t+="\n"),t}function f(e,n=data){let t=e,a="";for(let e in t){let r,_=t[e];switch(_.type){case"call":r=A(_,n);break;case"v":r=c(_,n);break;case"dec":r=i(_,n);break;case"mixin":r=E(_,n);break;default:return unexpected(_)}let l=n.statementEnd;e!=t.length-1||n.needLastStatementEnd||(l=""),n.needBrln&&(l+="\n"),a=a+n.indent+r+l}return a}var m=Object.freeze({__proto__:null,$ref:_,$val:l,$exp:p,$var:c,$dec:i,$param:s,$params:u,$arg:d,$args:o,$call:A,$mixin:E,$body:f,$globalStatements:function(e,n=data){if(void 0===e)return propUndefined("ast");if(void 0===n)return propUndefined("lang");let t="";for(let a in e){let r,_=e[a];switch(_.type){case"call":r=A(_,n);break;case"v":r=c(_,n);break;case"mixin":r=E(_,n);break;default:return unexpected(_)}let l=n.statementEnd;(a==e.length-1&&!n.needLastStatementEnd||"mixin"===_.type)&&(l=""),n.needBrln&&"mixin"!==_.type&&(l+="\n"),t=t+r+l}return t}});Object.freeze({__proto__:null,less:{var:"@_NAME_: _EXPRESSION_",mixin:"._NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"@_NAME_",paramDefault:"@_NAME_: _DEFAULT_",call:"._NAME_(_ARGS_)",ref:"@_NAME_",val:"_NAME_",arg:"",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".less"},lessMin:{var:"@_NAME_:_EXPRESSION_",mixin:"._NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"@_NAME_",paramDefault:"@_NAME_:_DEFAULT_",call:"._NAME_(_ARGS_)",ref:"@_NAME_",val:"_NAME_",arg:"",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!0,indent:"",needBrln:!1,wordSep:"-",extname:".less"},scss:{var:"$_NAME_: _EXPRESSION_",mixin:"@mixin _NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"$_NAME_",paramDefault:"$_NAME_: _DEFAULT_",call:"@include _NAME_(_ARGS_)",ref:"$_NAME_",val:"_NAME_",arg:"",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".scss"},scssMin:{var:"$_NAME_:_EXPRESSION_",mixin:"@mixin _NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"$_NAME_",paramDefault:"$_NAME_:_DEFAULT_",call:"@include _NAME_(_ARGS_)",ref:"$_NAME_",val:"_NAME_",arg:"",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!1,indent:"",needBrln:!1,wordSep:"-",extname:".scss"},styl:{var:"_NAME_ = _EXPRESSION_",mixin:"_NAME_(_PARAMS_) {\n_BODY_}",dec:"_PROP_: _VALUE_",param:"_NAME_",paramDefault:"_NAME_ = _DEFAULT_",call:"._NAME_(_ARGS_)",ref:"_NAME_",val:"_NAME_",arg:"",argSep:", ",paramSep:", ",statementEnd:";",needLastStatementEnd:!0,indent:"  ",needBrln:!0,wordSep:"-",extname:".styl"},stylMin:{var:"_NAME_=_EXPRESSION_",mixin:"_NAME_(_PARAMS_){_BODY_}",dec:"_PROP_:_VALUE_",param:"_NAME_",paramDefault:"_NAME_=_DEFAULT_",call:"._NAME_(_ARGS_)",ref:"_NAME_",val:"_NAME_",arg:"",argSep:",",paramSep:",",statementEnd:";",needLastStatementEnd:!1,indent:"",needBrln:!1,wordSep:"-",extname:".styl"}}),Object.freeze({__proto__:null,unexpected:function(e){console.log("Illegal argument exception: "+JSON.stringify(e,null,2))},propUndefined:function(e){console.log(`${e} is undefined`)}});var N="$";const{_var:M,_val:S,_ref:x}=r,{$ref:g}=m,v=new RegExp("[^#a-f\\d]","gi"),y=new RegExp("^#?[a-f\\d]{3}[a-f\\d]?$|^#?[a-f\\d]{6}([a-f\\d]{2})?$","i"),$={tokenName:"__NAME (__VALUE)"};exports.genGpl=function(t,a,r=$){let _=`GIMP Palette\nName: ${t}\n#\n`,l=[];const p={};e(a,(({name:e,value:n})=>p[e]=n));const c=n(p);return Object.keys(c).forEach((e=>{const n=c[e];let t=function(e,n={}){if("string"!=typeof e||v.test(e)||!y.test(e))throw new TypeError("Expected a valid hex string");let t=1;8===(e=e.replace(/^#/,"")).length&&(t=Number.parseInt(e.slice(6,8),16)/255,e=e.slice(0,6)),4===e.length&&(t=Number.parseInt(e.slice(3,4).repeat(2),16)/255,e=e.slice(0,3)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const a=Number.parseInt(e,16),r=a>>16,_=a>>8&255,l=255&a,p="number"==typeof n.alpha?n.alpha:t;return"array"===n.format?[r,_,l,p]:"css"===n.format?`rgb(${r} ${_} ${l}${1===p?"":` / ${Number((100*p).toFixed(2))}%`})`:{red:r,green:_,blue:l,alpha:p}}(n);if(null===t)return;const a=r.tokenName.replaceAll("__NAME",e).replaceAll("__VALUE",n),_=t.red+" "+t.green+" "+t.blue;l.push(_+" "+a)})),_+l.join("\n")},exports.octopizeTokens=function(n,t){const a=[];return e(n,(e=>{const n=function(e,n){const t=e.name;let a=e.value;if(a.startsWith(N)){const e=a.substring(1,a.length);a=g(x(e),n)}return M(t,S(a))}(e,t);a.push(n)})),a},exports.renderTokens=n,exports.tokens=e;
